<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head}"></head>
<body>
<nav th:replace="~{layout :: nav}"></nav>

<div class="container mt-10">
  <div class="content-wrapper">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="page-title mb-0">
        <i class="bi bi-people"></i> Gerenciar Usu치rios
      </h2>
      <a th:href="@{/web/usuarios/new}" class="btn btn-primary">
        <i class="bi bi-person-plus"></i> Novo Usu치rio
      </a>
    </div>

    <!-- Mensagem de Sucesso -->
    <div th:if="${mensagem}" class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="bi bi-check-circle"></i> <span th:text="${mensagem}"></span>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- Filtros -->
    <div class="card border-0 shadow-sm mb-4 mt-5 ">
      <div class="card-body ">
        <form th:action="@{/web/usuarios}" method="get" class="row g-3">
          <div class="col-md-4 ">
            <input type="text" name="search" class="form-control"
                   placeholder="游댌 Buscar por nome ou email..."
                   th:value="${search}">
          </div>
          <div class="col-md-3">
            <select name="tipo" class="form-select">
              <option value="">Todos os tipos</option>
              <option value="APRENDIZ" th:selected="${tipo == 'APRENDIZ'}">Aprendiz</option>
              <option value="INSTRUTOR" th:selected="${tipo == 'INSTRUTOR'}">Instrutor</option>
              <option value="CRIADOR" th:selected="${tipo == 'CRIADOR'}">Criador</option>
              <option value="EMPRESA" th:selected="${tipo == 'EMPRESA'}">Empresa</option>
              <option value="ADMINISTRADOR" th:selected="${tipo == 'ADMINISTRADOR'}">Administrador</option>
            </select>
          </div>
          <div class="col-md-3">
            <select name="status" class="form-select">
              <option value="">Todos os status</option>
              <option value="true" th:selected="${status == 'true'}">Ativos</option>
              <option value="false" th:selected="${status == 'false'}">Inativos</option>
            </select>
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">
              <i class="bi bi-search"></i> Filtrar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Tabela de Usu치rios -->
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Nome</th>
              <th>Email</th>
              <th>Tipo</th>
              <th>Idioma</th>
              <th>Cadastro</th>
              <th>Status</th>
              <th class="text-end">A칞칫es</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="usuario : ${usuarios}">
              <td th:text="${usuario.idUsuario}">1</td>
              <td th:text="${usuario.nmUsuario}">Nome</td>
              <td th:text="${usuario.emailUsuario}">email@exemplo.com</td>
              <td>
                <span class="badge badge-tipo text-dark"
                      th:classappend="${'badge-' + usuario.tpUsuario.name().toLowerCase()}"
                      th:text="${usuario.tpUsuario.tipo}">
                    Tipo
                </span>
              </td>
              <td th:text="${usuario.idiomaUsuario}">PT-BR</td>
              <td th:text="${#temporals.format(usuario.dtCadastroUsuario, 'dd/MM/yyyy')}">01/01/2025</td>
              <td>
                <span th:if="${usuario.stUsuario}" class="badge bg-success">Ativo</span>
                <span th:unless="${usuario.stUsuario}" class="badge bg-danger">Inativo</span>
              </td>
              <td class="text-end">
                <div class="btn-group btn-group-sm">
                  <!-- Bot칚o Editar -->
                  <a th:href="@{/web/usuarios/edit/{id}(id=${usuario.idUsuario})}"
                     class="btn btn-outline-primary" title="Editar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                    </svg>
                  </a>

                  <!-- Bot칚o para gerenciar distritos -->
                  <a th:href="@{/web/usuarios/{id}/distritos(id=${usuario.idUsuario})}"
                     class="btn btn-outline-success" title="Gerenciar Distritos">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                      <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"/>
                    </svg>
                  </a>


                  <!-- Bot칚o Ativar/Desativar -->
                  <a th:href="@{/web/usuarios/toggle-status/{id}(id=${usuario.idUsuario})}"
                     class="btn btn-outline-warning"
                     th:title="${usuario.stUsuario ? 'Desativar' : 'Ativar'}">
                    <!-- Lock -->
                    <svg th:if="${usuario.stUsuario}" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2M5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1"/>
                    </svg>
                    <!-- Unlock -->
                    <svg th:unless="${usuario.stUsuario}" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2M3 8a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z"/>
                    </svg>
                  </a>

                  <!-- Bot칚o Excluir -->
                  <a th:href="@{/web/usuarios/delete/{id}(id=${usuario.idUsuario})}"
                     class="btn btn-outline-danger"
                     title="Excluir"
                     onclick="return confirm('Tem certeza que deseja excluir este usu치rio?')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                      <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                    </svg>
                  </a>
                </div>
              </td>

            </tr>
            </tbody>
          </table>
        </div>

        <!-- Mensagem quando n칚o h치 resultados -->
        <div th:if="${#lists.isEmpty(usuarios)}" class="text-center py-5 text-muted">
          <i class="bi bi-inbox display-1"></i>
          <p class="mt-3">Nenhum usu치rio encontrado.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<footer th:replace="~{layout :: footer}"></footer>
<div th:replace="~{layout :: scripts}"></div>
</body>
</html>